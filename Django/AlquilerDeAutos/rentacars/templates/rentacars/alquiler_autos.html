{% load static %}
<!doctype html>
<html class="no-js" lang="en">
<head>
    <title>RentaCars - Alquiler Autos</title>
    <meta name="description" content="Â¡Alquila un coche en Buenos Aires y explora la ciudad a tu propio ritmo! Encuentra las mejores opciones de alquiler de coches 
    con nosotros.">
    <meta name="keywords" content="Alquiler de coches Buenos Aires, Rentar auto Buenos Aires">
    <meta name="Grupo5-Django" content="Grupo5-Django">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1" />
    <link rel="shortcut icon" href="images/favicon.png">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="{% static 'rentacars/styles/altaAutos.css' %}">
    <script src="{% static 'rentacars/js/alquiler_autos.js' %}"></script>
</head>
<body>
    <div class="contenedor">
        {% if messages %}
            <ul class="messages">
                {% for message in messages %}
                    <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
                {% endfor %}
            </ul>
        {% endif %}
        <form method="POST" action="{% url 'alquiler_autos' %}">
            <h1>Alta de Autos</h1>
            {% csrf_token %}
            {{ alquiler_autos_form.as_p }}
            <button type="submit">Guardar</button>
        </form>
        <img src="{% static 'rentacars/img/logo3.png' %}" alt="logo">
    </div>
</body>
<script>
    document.addEventListener('DOMContentLoaded', function () {
    const fechaInicioInput = document.getElementById('id_fecha_inicio');
    const fechaFinInput = document.getElementById('id_fecha_fin');
    const precioDiarioInput = document.getElementById('id_precio_diario');
    const precioTotal = document.getElementById('id_precio_total');

    function calculatePrice() {
        console.log("hola")
        const fechaInicio = new Date(fechaInicioInput.value);
        const fechaFin = new Date(fechaFinInput.value);
        // const precioDiario = parseFloat(precioDiarioInput.value);
        const precioDiario = 1;
        {#!isNaN(fechaInicio) && !isNaN(fechaFin) && !isNaN(precioDiario)#}
        if (true) {
            console.log("value2")
            const delta = fechaFin - fechaInicio;
            const dias = (delta / (1000 * 60 * 60 * 24)) + 1;
            const precioTotal = dias * precioDiario;
            precioTotal.value = precioTotal;
            console.log(precioTotal)
        } else {
            console.log("value")
            precioTotal.value = '0.0';
        }
    }

    fechaInicioInput.addEventListener('change', calculatePrice);
    fechaFinInput.addEventListener('change', calculatePrice);

    
});
</script>
</html>